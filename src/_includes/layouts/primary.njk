<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {%- if noindex -%}<meta name="robots" content="noindex">{%- endif -%}
    <link rel="preconnect" href="https://d33wubrfki0l68.cloudfront.net">
    <link rel="dns-prefetch" href="https://d33wubrfki0l68.cloudfront.net">
    <link rel="canonical" href="https://www.troyv.dev{{page.url}}">
    <link rel="stylesheet" href="https://fonts.typotheque.com/WF-036345-011398.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/main.css">
    {% if page.fileSlug === "" %}<link rel="stylesheet" href="/assets/css/homepage.css">{% endif %}

    {%- if addCSS or codeblock or plvylist -%}
    {%- set css -%}
      {%- if addCSS -%}
        {%- include "css/" + page.fileSlug + ".css" -%}
      {%- endif -%}

      {%- if codeblock -%}
        {%- include "css/prism.css" -%}
      {%- endif -%}

      {%- if plvylist -%}
        {%- include "css/plvylist.css" -%}
      {%- endif -%}
    {%- endset -%}
    <style>
      {{ css | cssmin | safe }}
    </style>
    {%- endif -%}

    {% include "seo.njk" %}

  </head>
  <body class="{{pageName}}">
    {%- include "header.html" %}
    {{ content | safe }}
    {%- include "footer.html" -%}

    {# ADD ALL THE SCRIPTS #}
    {%- set mainJS -%}
      {%- include "js/main.js" -%}
    {%- endset -%}
    <script>
      {{ mainJS | safe }}
    </script>

    {# Don't load this async or defer because it needs to come in prior to the actual data it manipulates #}
    {% if d3 %}<script src="/assets/js/d3.min.js"></script>{% endif %}

    {%- if addJS or page.fileSlug === "" -%}
    {%- set js -%}
      {%- if addJS -%}
        {%- include "js/" + page.fileSlug + ".js" -%}
      {%- endif -%}

      {% if page.fileSlug === "" %}
        {%- include "js/homepage.js" -%}
      {% endif %}
    {%- endset -%}
    <script type="module">
      {{ js | jsmin | safe }}
    </script>
    {%- endif -%}

    {% if plvylist %}<script src="/assets/js/plvylist.js" defer></script>{% endif %}
  </body>
</html>
